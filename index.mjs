// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@v0.2.2-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-square-matrix@v0.2.2-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-vector-like@v0.2.2-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@v0.2.2-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ctor@v0.2.2-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ctor@v0.2.2-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@v0.2.2-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.2-esm/index.mjs";function m(r,e){return(e?i:n)("float64",new s(r*r),[r,r],[r,1],0,"row-major")}function a(n,a){var f,h,l,p,j,v;if(v=0,r(n))h=m(f=n,!1);else{if(!e(n))throw new TypeError(d("1HBDb",n));f=n.shape[0],h=n}if(j=new s(f),p=m(f,!0),arguments.length>1){if(!t(a))throw new TypeError(d("1HBDc",a));if(o(a.shape)!==f)throw new Error(d("1HB9V",f,o(a.shape)));return l=a,function(r){var e,s,n,i,o;if(0===arguments.length)return 0===v?null:h;if(!t(r))throw new TypeError(d("1HBDd",r));if(r.shape[0]!==f)throw new Error(d("1HB9W",f,r.shape[0]));for(v+=1,i=0;i<f;i++)for(j[i]=r.get(i)-l.get(i),n=j[i],o=0;o<=i;o++)s=p.get(i,o)+n*j[o],p.set(i,o,s),p.set(o,i,s),e=s/v,h.set(i,o,e),h.set(o,i,e);return h}}return l=function(r){var e;return e=new s(r),i("float64",e,[r],[1],0,"row-major")}(f),function(r){var e,s,n,i,o,m,a,g,w;if(0===arguments.length)return 0===v?null:h;if(!t(r))throw new TypeError(d("1HBDd",r));if(r.shape[0]!==f)throw new Error(d("1HB9W",f,r.shape[0]));for(a=(m=v)/(v+=1),s=m||1,g=0;g<f;g++)for(o=l.get(g),j[g]=r.get(g)-o,o+=j[g]/v,l.set(g,o),n=a*j[g],w=0;w<=g;w++)i=p.get(g,w)+n*j[w],p.set(g,w,i),p.set(w,g,i),e=i/s,h.set(g,w,e),h.set(w,g,e);return h}}export{a as default};
//# sourceMappingURL=index.mjs.map
