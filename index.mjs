// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-square-matrix@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-vector-like@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ctor@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ctor@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";function d(r,e){return(e?i:n)("float64",new s(r*r),[r,r],[r,1],0,"row-major")}function a(r){var e;return e=new s(r),i("float64",e,[r],[1],0,"row-major")}function f(n,i){var f,h,l,p,j,g;if(g=0,r(n))h=d(f=n,!1);else{if(!e(n))throw new TypeError(m("1HBHz",n));f=n.shape[0],h=n}if(j=new s(f),p=d(f,!0),arguments.length>1){if(!t(i))throw new TypeError(m("1HBI0",i));if(o(i.shape)!==f)throw new Error(m("1HB9V,I1",f,o(i.shape)));return l=i,u}return l=a(f),w;function w(r){var e,s,n,i,o,d,a,w,u;if(0===arguments.length)return 0===g?null:h;if(!t(r))throw new TypeError(m("1HBI2",r));if(r.shape[0]!==f)throw new Error(m("1HB9W,I3",f,r.shape[0]));for(a=(d=g)/(g+=1),s=d||1,w=0;w<f;w++)for(o=l.get(w),j[w]=r.get(w)-o,o+=j[w]/g,l.set(w,o),n=a*j[w],u=0;u<=w;u++)i=p.get(w,u)+n*j[u],p.set(w,u,i),p.set(u,w,i),e=i/s,h.set(w,u,e),h.set(u,w,e);return h}function u(r){var e,s,n,i,o;if(0===arguments.length)return 0===g?null:h;if(!t(r))throw new TypeError(m("1HBI2",r));if(r.shape[0]!==f)throw new Error(m("1HB9W,I3",f,r.shape[0]));for(g+=1,i=0;i<f;i++)for(j[i]=r.get(i)-l.get(i),n=j[i],o=0;o<=i;o++)s=p.get(i,o)+n*j[o],p.set(i,o,s),p.set(o,i,s),e=s/g,h.set(i,o,e),h.set(o,i,e);return h}}export{f as default};
//# sourceMappingURL=index.mjs.map
