// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@v0.1.0-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-square-matrix@v0.1.0-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-vector-like@v0.1.0-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@v0.1.1-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ctor@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ctor@v0.1.0-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@v0.1.1-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.1.1-esm/index.mjs";function d(r,e){return(e?i:n)("float64",new s(r*r),[r,r],[r,1],0,"row-major")}function a(r){var e;return e=new s(r),i("float64",e,[r],[1],0,"row-major")}function f(n,i){var f,h,l,p,j,v;if(v=0,r(n))h=d(f=n,!1);else{if(!e(n))throw new TypeError(m("1HBHz",n));f=n.shape[0],h=n}if(j=new s(f),p=d(f,!0),arguments.length>1){if(!t(i))throw new TypeError(m("1HBI0",i));if(o(i.shape)!==f)throw new Error(m("1HB9V,I1",f,o(i.shape)));return l=i,w}return l=a(f),g;function g(r){var e,s,n,i,o,d,a,g,w;if(0===arguments.length)return 0===v?null:h;if(!t(r))throw new TypeError(m("1HBI2",r));if(r.shape[0]!==f)throw new Error(m("1HB9W,I3",f,r.shape[0]));for(a=(d=v)/(v+=1),s=d||1,g=0;g<f;g++)for(o=l.get(g),j[g]=r.get(g)-o,o+=j[g]/v,l.set(g,o),n=a*j[g],w=0;w<=g;w++)i=p.get(g,w)+n*j[w],p.set(g,w,i),p.set(w,g,i),e=i/s,h.set(g,w,e),h.set(w,g,e);return h}function w(r){var e,s,n,i,o;if(0===arguments.length)return 0===v?null:h;if(!t(r))throw new TypeError(m("1HBI2",r));if(r.shape[0]!==f)throw new Error(m("1HB9W,I3",f,r.shape[0]));for(v+=1,i=0;i<f;i++)for(j[i]=r.get(i)-l.get(i),n=j[i],o=0;o<=i;o++)s=p.get(i,o)+n*j[o],p.set(i,o,s),p.set(o,i,s),e=s/v,h.set(i,o,e),h.set(o,i,e);return h}}export{f as default};
//# sourceMappingURL=index.mjs.map
